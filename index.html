<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>webWeeks1 — تیروتیر | tirotir.ir | آموزشگاه هوش مصنوعی</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <meta name="color-scheme" content="light dark" />
  <style>
    :root{--b:rgba(100,116,139,.28)}
    body{font-feature-settings:"cv02","cv03","cv04","cv11"}
    .card{background:rgba(255,255,255,.75);border:1px solid var(--b)}
    .dark .card{background:rgba(15,23,42,.6);border-color:rgba(148,163,184,.3)}
    .btn{border:1px solid var(--b);border-radius:.75rem;padding:.5rem .75rem}
    details>summary{cursor:pointer;list-style:none}
    details>summary::-webkit-details-marker{display:none}
    table{width:100%;border-collapse:separate;border-spacing:0}
    thead th{position:sticky;top:0;background:rgba(248,250,252,.7);backdrop-filter:blur(6px)}
    .dark thead th{background:rgba(15,23,42,.7)}
    th,td{padding:.55rem .6rem;border-bottom:1px solid rgba(100,116,139,.22);vertical-align:top}
    tbody tr:hover{background:rgba(99,102,241,.08)}
    .badge{font-size:.7rem;padding:.15rem .45rem;border:1px solid var(--b);border-radius:.5rem;white-space:nowrap}
    .done{background:rgba(34,197,94,.12);border-color:rgba(34,197,94,.45)}
    .rtl{direction:rtl}
    .ltr{direction:ltr}
    .link{ text-decoration:underline; text-underline-offset:2px }
  </style>
</head>
<body class="bg-slate-50 text-slate-800 dark:bg-slate-900 dark:text-slate-100">
  <header class="border-b border-slate-200/70 dark:border-slate-700/60 sticky top-0 bg-white/70 dark:bg-slate-900/70 backdrop-blur z-10">
    <div class="max-w-7xl mx-auto p-4 flex flex-col gap-3 md:flex-row md:items-center md:justify-between">
      <div class="space-y-1">
        <h1 class="text-2xl font-bold">تیروتیر — <a href="https://tirotir.ir" class="underline underline-offset-2" target="_blank" rel="noopener">tirotir.ir</a></h1>
        <p class="text-sm text-slate-600 dark:text-slate-300">آموزشگاه هوش مصنوعی • داشبورد دوره: <span class="font-semibold">webWeeks1</span> — همهٔ درس‌ها به تفکیک دسته</p>
      </div>
      <div class="flex gap-2 flex-wrap">
        <label class="btn flex items-center gap-2 cursor-pointer"><input id="newTab" type="checkbox" class="h-4 w-4" checked/> باز شدن در تب جدید</label>
        <button id="darkBtn" class="btn">تم تیره/روشن</button>
        <button id="rtlBtn" class="btn">RTL / LTR</button>
        <button id="expandBtn" class="btn">بازکردن همه</button>
        <button id="collapseBtn" class="btn">بستن همه</button>
        <button id="resetBtn" class="btn">حذف وضعیت‌های «انجام شد»</button>
      </div>
    </div>
  </header>

  <main id="root" class="max-w-7xl mx-auto p-4 space-y-5"></main>

  <footer class="max-w-7xl mx-auto p-6 text-xs text-slate-600 dark:text-slate-300 ltr">
    روش اجرا از ریشهٔ مخزن: <code>python -m http.server 8000</code> (برای HTML) — یا <code>php -S localhost:8001</code> (برای صفحات PHP).
  </footer>

  <script>
    // ---------------- Helpers: Titles (EN + FA) ----------------
    const fileTitleEN = (path) => {
      const fname = path.split('/').pop().replace(/\.(html|php|xml|xsl)$/i,'');
      const en = fname
        .replace(/_/g,' ').replace(/-/g,' ')
        .replace(/(\d)([A-Za-z])/g,'$1 $2')
        .replace(/([a-z])([A-Z])/g,'$1 $2')
        .trim();
      const cap = en.split(' ').map(w=>{
        if(/^[A-Z0-9]+$/.test(w))return w;
        if(/^\d+$/.test(w))return w;
        const map = {css:'CSS',html:'HTML',js:'JS',jquery:'jQuery',gsap:'GSAP',json:'JSON',xml:'XML',xsl:'XSL'};
        return map[w.toLowerCase()]||w.charAt(0).toUpperCase()+w.slice(1);
      }).join(' ');
      return cap;
    };

    const fileTitleFA = (path, en) => {
      // Patterns first (دقیق‌تر)
      const m = {
        jq: path.match(/jQuery(\d+)\.html/i),
        color: path.match(/color\/color(\d+)\.html/i),
        w3: path.match(/week3\/newJS\/0*([0-9]+).*\.html$/i),
        w4: path.match(/week4\/newJS\/0*([0-9]+).*\.html$/i)
      };
      if(m.jq) return `آموزش jQuery — جلسه ${m.jq[1]}`;
      if(m.color) return `رنگ‌ها — مثال ${m.color[1]}`;
      if(/newJS/i.test(path) && (m.w3 || m.w4)) return `جاوااسکریپت — درس ${ (m.w3?.[1] || m.w4?.[1]) }`;
      if(/pizza/i.test(path)) return 'پروژهٔ پیتزا';
      if(/blogBootstrap/i.test(path)) return 'وبلاگ با Bootstrap';
      if(/google1/i.test(path)) return 'صفحهٔ جست‌وجوی شبیه Google';
      if(/music1/i.test(path)) return 'پخش‌کنندهٔ موسیقی';
      if(/AnimatedProduct/i.test(path)) return 'محصول متحرک';
      if(/bank\/atm/i.test(path)) return 'دستگاه خودپرداز (ATM)';
      if(/bank\/interest/i.test(path)) return 'محاسبهٔ سود بانکی';
      if(/bank\/Loan/i.test(path)) return 'محاسبهٔ وام';
      if(/bank\/Mortgage/i.test(path)) return 'محاسبهٔ رهن/وام مسکن';
      if(/flight1/i.test(path)) return 'جست‌وجوی پرواز';
      if(/DataFormats/i.test(path)) return 'قالب‌های داده (CSV/JSON/XML)';
      if(/json\//i.test(path)) return 'تمرین JSON';
      if(/xml\/index\.html$/i.test(path)) return 'نمایش XML';
      if(/XML2\/simple\.xsl$/i.test(path)) return 'قالب XSL ساده';
      if(/chronometer/i.test(path)) return 'کرنومتر';
      if(/email-form/i.test(path)) return 'فرم ایمیل';
      if(/cssMenu/i.test(path)) return 'منوی CSS';
      if(/Google charts/i.test(path)) return 'نمودارها (Google/Chart.js)';
      if(/someUtilities1\/todolist/i.test(path)) return 'فهرست کارها (ToDo)';
      if(/someUtilities1\/digit-calc/i.test(path)) return 'ماشین‌حساب ارقام';
      if(/someUtilities1\/counter/i.test(path)) return 'شمارنده';
      if(/someUtilities1\/txt-save/i.test(path)) return 'ذخیرهٔ متن در مرورگر';
      if(/htmlViruses/i.test(path)) return 'دموهای اثرات DOM (htmlViruses)';
      if(/calculator/i.test(path)) return 'ماشین‌حساب';
      if(/simpleDarkLight/i.test(path)) return 'حالت روشن/تاریک ساده';
      if(/login1\.html$/i.test(path)) return 'فرم ورود';
      if(/WebPage1\/about/i.test(path)) return 'صفحهٔ درباره ما';
      if(/WebPage1\/contact/i.test(path)) return 'صفحهٔ تماس';
      if(/WebPage1\/projects/i.test(path)) return 'صفحهٔ پروژه‌ها';
      if(/properties\.html$/i.test(path)) return 'فهرست املاک';
      if(/property-details\.html$/i.test(path)) return 'جزئیات ملک';
      // واژه‌نامهٔ ساده
      const dict = {
        html:'اچ‌تی‌ام‌ال', css:'سی‌اس‌اس', js:'جاوااسکریپت', jquery:'جی‌کوئری', gsap:'جی‌اس‌ای‌پی',
        json:'جیسون', xml:'ایکس‌ام‌ال', xsl:'ایکس‌اس‌ال',
        color:'رنگ', background:'پس‌زمینه', countdown:'شمارش معکوس', dynamic:'پویا', greeting:'خوشامدگویی',
        quote:'نقل‌قول', visitor:'بازدیدکننده', scroll:'اسکرول', top:'بالا', icons:'آیکون‌ها'
      };
      const tokens = en.split(/\s+/).map(w=>{
        const k = w.toLowerCase();
        return dict[k] ? dict[k] : (/^\d+$/.test(w) ? w : w);
      });
      // خروجی پیش‌فرض: EN با وام‌واژه‌های فارسی‌شده
      return tokens.join(' ');
    };

    // Link cell (file name)
    const linkCell = (href) => {
      const a = document.createElement('a');
      a.href = href;
      a.className = 'link ltr';
      a.textContent = href.split('/').slice(-1)[0];
      a.title = href;
      return a;
    };

    // ---------------- Done-state store ----------------
    const doneKey = (href) => `ww:done:${href}`;
    const isDone = (href) => localStorage.getItem(doneKey(href)) === '1';
    const setDone = (href, val) => localStorage.setItem(doneKey(href), val ? '1' : '0');

    // ---------------- Table builder ----------------
    function tableFrom(files, onProgress){
      const table = document.createElement('table');
      table.innerHTML = `
        <thead>
          <tr class="text-right text-sm">
            <th style="width:38%">عنوان فارسی</th>
            <th style="width:38%">Title (EN)</th>
            <th>فایل</th>
            <th class="text-center">وضعیت</th>
            <th class="text-right">نوع</th>
          </tr>
        </thead>
        <tbody></tbody>`;
      const tb = table.querySelector('tbody');
      let doneCount = 0;

      files.forEach(f=>{
        const tr = document.createElement('tr');
        const en = fileTitleEN(f);
        const fa = fileTitleFA(f, en);
        const type = (/\.(php)$/i.test(f)?'PHP':(/\.(xml)$/i.test(f)?'XML':(/\.(xsl)$/i.test(f)?'XSL':'HTML')));
        const done = isDone(f);
        if(done) doneCount++;

        tr.innerHTML = `
          <td>${fa}</td>
          <td class="ltr">${en}</td>
          <td class="ltr"></td>
          <td class="text-center"></td>
          <td class="text-right"><span class="badge ${done?'done':''}">${type}</span></td>
        `;

        // file link
        const fileTd = tr.children[2];
        fileTd.appendChild(linkCell(f));

        // status
        const stTd = tr.children[3];
        const btn = document.createElement('button');
        btn.className = 'btn text-sm ' + (done ? 'border-green-400' : '');
        btn.textContent = done ? '✓ انجام شد' : 'علامت بزن: انجام شد';
        btn.setAttribute('aria-pressed', done ? 'true' : 'false');
        btn.onclick = ()=>{
          const now = !isDone(f);
          setDone(f, now);
          btn.textContent = now ? '✓ انجام شد' : 'علامت بزن: انجام شد';
          btn.classList.toggle('border-green-400', now);
          tr.querySelector('.badge').classList.toggle('done', now);
          onProgress(now ? +1 : -1);
        };
        stTd.appendChild(btn);

        tb.appendChild(tr);
      });

      return {table, doneCount};
    }

    function section(name, desc, files, open=true){
      const wrap = document.createElement('section');
      wrap.className = 'card rounded-2xl p-4';
      const details = document.createElement('details');
      details.open = open;

      const count = files.length;
      const header = document.createElement('summary');
      const right = document.createElement('div');
      right.className = 'flex items-center gap-2';

      const tagFiles = document.createElement('span');
      tagFiles.className = 'badge';
      tagFiles.textContent = `${count} فایل`;

      const tagDone = document.createElement('span');
      tagDone.className = 'badge';
      tagDone.textContent = `۰ انجام`;

      right.append(tagFiles, tagDone);

      header.innerHTML = `
        <div class="flex items-start justify-between gap-3">
          <div>
            <h2 class="text-lg font-semibold">${name}</h2>
            <p class="text-sm text-slate-600 dark:text-slate-300">${desc||''}</p>
          </div>
        </div>`;
      header.appendChild(right);
      details.appendChild(header);

      const {table, doneCount} = tableFrom(files, (delta)=>{
        doneSoFar += delta;
        sectionDone += delta;
        tagDone.textContent = `${sectionDone} انجام`;
      });
      let sectionDone = doneCount;
      tagDone.textContent = `${sectionDone} انجام`;

      details.appendChild(table);
      wrap.appendChild(details);
      return wrap;
    }

    // ---------------- Catalog (lists) ----------------
    const W1 = [
      "week1/0.html","week1/00.html","week1/first0.html","week1/first1.html",
      "week1/html_css1.html","week1/css0.html","week1/css1.html","week1/newJS001.html","week1/test1.html",
      "week1/projects/lesson1.html","week1/projects/two.html",
      "week1/marquee/marquee.html","week1/marquee/marquee2.html","week1/marquee/marquee3.html","week1/marquee/marquee4.html",
      "week1/marquee/marquee5.html","week1/marquee/marquee6.html","week1/marquee/marquee7.html","week1/marquee/marquee8.html",
      "week1/marquee/marquee9.html","week1/marquee/marquee10.html","week1/marquee/marquee11.html","week1/marquee/world02.html"
    ];

    const W2 = [
      "week2/color/color1.html","week2/color/color2.html","week2/color/color3.html","week2/color/color4.html",
      "week2/color/color5.html","week2/color/color6.html","week2/color/color7.html","week2/color/color8.html",
      "week2/css/css0.html","week2/css/css1.html","week2/css/css2.html","week2/css/css3.html","week2/css/css4.html",
      "week2/css/css5.html","week2/css/css6.html","week2/css/css7.html","week2/css/css8.html","week2/css/css9.html",
      "week2/css/css91.html","week2/css/css92.html","week2/css/css93.html","week2/css/css94.html","week2/css/css95.html",
      "week2/css/css96.html","week2/css/css97.html","week2/css/css98.html","week2/css/css99.html",
      "week2/html/wwwww/index.html","week2/html/wwwww/about.html","week2/html/wwwww/contact.html","week2/html/wwwww/university.html",
      "week2/html/ww/01b.html"
    ];

    const W3 = [
      "week3/newJS/001.html","week3/newJS/002.html","week3/newJS/002-web.html","week3/newJS/003.HTML","week3/newJS/004.html",
      "week3/newJS/005.html","week3/newJS/006.html","week3/newJS/007.html","week3/newJS/008.html","week3/newJS/009.html",
      "week3/newJS/0031-function1.html","week3/newJS/0032-function2.html",
      "week3/newJS/0022-logic.html","week3/newJS/0023-while.html","week3/newJS/0024-for.html","week3/newJS/0024-for--.html",
      "week3/newJS/0025-for2.html","week3/newJS/0026-while2.html","week3/newJS/0027-for3.html","week3/newJS/0028-for4.html",
      "week3/newJS/0029-switch.html","week3/newJS/0030-switch2.html","week3/newJS/js1.html","week3/newJS/game1.html",
      "week3/projects/blog1/blogBootstrap.html","week3/projects/google1/google1.html","week3/projects/music/music1.html",
      "week3/pizza3.html"
    ];

    const W4 = [
      "week4/newJS/001.html","week4/newJS/0010.html","week4/newJS/0011.html","week4/newJS/0012.html","week4/newJS/0013.html",
      "week4/newJS/0014.html","week4/newJS/0015.html","week4/newJS/0016.html","week4/newJS/0017.html","week4/newJS/0018.html",
      "week4/newJS/0019.html","week4/newJS/002.html","week4/newJS/002-web.html","week4/newJS/0020.html","week4/newJS/0021.html",
      "week4/newJS/0022-logic.html","week4/newJS/0023-while.html","week4/newJS/0024-for.html","week4/newJS/0024-for--.html",
      "week4/newJS/0025-for2.html","week4/newJS/0026-while2.html","week4/newJS/0027-for3.html","week4/newJS/0028-for4.html",
      "week4/newJS/0029-switch.html","week4/newJS/0030-switch2.html","week4/newJS/0031-function1.html","week4/newJS/0032-function2.html",
      "week4/projects/login/login1.html",
      "week4/projects/WebPage1/htmlnew1.html","week4/projects/WebPage1/about.html","week4/projects/WebPage1/contact.html","week4/projects/WebPage1/projects.html"
    ];

    const W5 = [
      "week5/5js_css_jQ/00000.html","week5/5js_css_jQ/Anime.js1.html","week5/5js_css_jQ/css-anim001.html",
      "week5/5js_css_jQ/css-anim1.html","week5/5js_css_jQ/css-anim2.html","week5/5js_css_jQ/css-anim3.html",
      "week5/5js_css_jQ/css-anim4.html","week5/5js_css_jQ/css-anim5.html","week5/5js_css_jQ/dice.html","week5/5js_css_jQ/GSAP1.html",
      "week5/5js_css_jQ/js-function.html","week5/5js_css_jQ/timer.html","week5/5js_css_jQ/Typed.js1.html","week5/5js_css_jQ/vivus1.html",
      ...Array.from({length:23},(_,i)=>`week5/5js_css_jQ/jQuery${i+1}.html`),
      "week5/AnimatedProduct/AnimatedProduct.html","week5/bank/atm1.html","week5/bank/interest1.html","week5/bank/Loan1.html","week5/bank/Mortgage1.html",
      "week5/flight1/Flight1.html"
    ];

    const W6 = [
      "week6/5js_css_jQ/001.html","week6/5js_css_jQ/002.html","week6/5js_css_jQ/003.html","week6/5js_css_jQ/004.html","week6/5js_css_jQ/005.html",
      "week6/5js_css_jQ/006.html","week6/5js_css_jQ/009.html","week6/5js_css_jQ/12.html","week6/5js_css_jQ/13.html","week6/5js_css_jQ/14.html",
      "week6/5js_css_jQ/animate1.html","week6/5js_css_jQ/animate2.html","week6/5js_css_jQ/animateAll.html","week6/icons/icons1.html"
    ];

    const W7 = [
      "week7/5js_css_jQ/00000.html","week7/5js_css_jQ/Anime.js1.html","week7/5js_css_jQ/css-anim001.html","week7/5js_css_jQ/css-anim1.html",
      "week7/5js_css_jQ/css-anim2.html","week7/5js_css_jQ/css-anim3.html","week7/5js_css_jQ/css-anim4.html","week7/5js_css_jQ/css-anim5.html",
      "week7/5js_css_jQ/dice.html","week7/5js_css_jQ/GSAP1.html",
      ...Array.from({length:23},(_,i)=>`week7/5js_css_jQ/jQuery${i+1}.html`)
    ];

    const W8 = [
      "week8/DataFormats/001.html","week8/DataFormats/002.html","week8/DataFormats/003.html",
      "week8/json/02.html","week8/json/03.html","week8/json/04.html","week8/json/05.html","week8/json/new.html",
      "week8/xml/index.html","week8/XML2/simple.xsl","week8/all-html.html","week8/1.html"
    ];

    const W9 = [
      "week9/background-color.html","week9/color.html","week9/Countdown .html","week9/Countdown2.html","week9/dynamicGreeting.html",
      "week9/quote.html","week9/quote2.html","week9/scrollToTop.html","week9/visitor.html"
    ];

    const MINIP = [
      // Atom feed
      "miniProjects/Atom_feed/01.html","miniProjects/Atom_feed/02.html","miniProjects/Atom_feed/03.html","miniProjects/Atom_feed/04.html",
      "miniProjects/Atom_feed/rssViewer.html",
      // Chronometer
      "miniProjects/chronometer/index.html","miniProjects/chronometer/index2.html","miniProjects/chronometer/index3.html","miniProjects/chronometer/index4.html",
      // Color
      "miniProjects/color/color1.html","miniProjects/color/color2.html","miniProjects/color/color3.html","miniProjects/color/color4.html",
      "miniProjects/color/color5.html","miniProjects/color/color6.html","miniProjects/color/color7.html","miniProjects/color/color8.html",
      // cssMenu + email
      "miniProjects/cssMenu/cssMenu1.html","miniProjects/email-form/index.html",
      // Google charts (+ Chart.js)
      "miniProjects/Google charts/00011.html","miniProjects/Google charts/001.html","miniProjects/Google charts/0010.html","miniProjects/Google charts/002.html",
      "miniProjects/Google charts/003.html","miniProjects/Google charts/004.html","miniProjects/Google charts/005.html","miniProjects/Google charts/006.html",
      "miniProjects/Google charts/007.html","miniProjects/Google charts/008.html","miniProjects/Google charts/008fa.html","miniProjects/Google charts/009.html",
      "miniProjects/Google charts/Chart.js.html",
      // someAnime1
      "miniProjects/someAnime1/01.html","miniProjects/someAnime1/02.html","miniProjects/someAnime1/03.html","miniProjects/someAnime1/04.html","miniProjects/someAnime1/05.html","miniProjects/someAnime1/06.html",
      "miniProjects/someAnime1/10.html","miniProjects/someAnime1/11.html","miniProjects/someAnime1/text1.html","miniProjects/someAnime1/text2.html","miniProjects/someAnime1/text3.html",
      // someUtilities1
      "miniProjects/someUtilities1/calc222.html","miniProjects/someUtilities1/counter1.html","miniProjects/someUtilities1/counter2.html",
      "miniProjects/someUtilities1/digit-calc1.html","miniProjects/someUtilities1/digit-calc2.html","miniProjects/someUtilities1/digit-calc3.html",
      "miniProjects/someUtilities1/todolist1.html","miniProjects/someUtilities1/todolist2.html","miniProjects/someUtilities1/todolist3.html","miniProjects/someUtilities1/todolist4.html",
      "miniProjects/someUtilities1/todolist5.html","miniProjects/someUtilities1/txt-save1.html","miniProjects/someUtilities1/txt-save2.html",
      // htmlViruses (آموزشی)
      "miniProjects/htmlViruses/0.html","miniProjects/htmlViruses/00.html","miniProjects/htmlViruses/000.html","miniProjects/htmlViruses/0000.html",
      "miniProjects/htmlViruses/05.html","miniProjects/htmlViruses/06.html","miniProjects/htmlViruses/07.html","miniProjects/htmlViruses/08.html","miniProjects/htmlViruses/virus9.html",
      // XML demos
      "miniProjects/xml/index.html","miniProjects/XML2/cd_catalog.xml","miniProjects/XML2/cd_catalog_with_css.xml","miniProjects/XML2/simple.xsl","miniProjects/XML2/simplexsl.xml"
    ];

    const CALC = [
      "newCalculator/calculator1.html","newCalculator/calculator1-.html","newCalculator/calculator2.html","newCalculator/calculator2-.html",
      "newCalculator/calculator3.html","newCalculator/calculator3-.html","newCalculator/calculator3--.html","newCalculator/eval.html","newCalculator/simpleDarkLight.html"
    ];

    const PHP = Array.from({length:34},(_,i)=>`phptirotir/${String(i+1).padStart(2,'0')}.php`).concat(["phptirotir/phpw.php"]);

    const TEMPL = [
      "someSites/2133_moso_interior/index.html","someSites/2137_barista_cafe/index.html",
      "someSites/templatemo_591_villa_agency/index.html","someSites/templatemo_591_villa_agency/properties.html",
      "someSites/templatemo_591_villa_agency/property-details.html","someSites/templatemo_591_villa_agency/contact.html"
    ];

    const EXAM = [
      "webExam/1/001.html","webExam/1/002.html","webExam/1/003.html","webExam/1/test.html",
      "webExam/2/004.html","webExam/2/005.html","webExam/2/006.html",
      "webExam/3/007.html","webExam/3/008.html","webExam/3/009.html",
      "webExam/4/0010.html",
      "webExam/js-projects/0001.html","webExam/js-projects/001.html","webExam/js-projects/00021.html","webExam/js-projects/00021-.html",
      "webExam/js-projects/00021--.html","webExam/js-projects/00021---.html","webExam/js-projects/00021----fa.html"
    ];

    const catalog = [
      ["هفتهٔ ۱ — HTML و شروع کار","مقدمهٔ HTML، CSS ساده و مارکوی.", W1],
      ["هفتهٔ ۲ — CSS و ساختار صفحه","رنگ‌ها، تمرین‌های CSS و یک سایت کوچک.", W2],
      ["هفتهٔ ۳ — مبانی JS + مینی‌پروژه‌ها","تمرین‌های جاوااسکریپت و پروژه‌های کوچک.", W3],
      ["هفتهٔ ۴ — JS میانی + صفحات سایت","الگوهای بیشتر JS و سایت چندصفحه‌ای.", W4],
      ["هفتهٔ ۵ — انیمیشن‌ها و jQuery + اپ‌ها","CSS/JS انیمیشن، سری jQuery، اپ‌های بانکی/پرواز.", W5],
      ["هفتهٔ ۶ — انیمیشن‌های بیشتر و آیکون‌ها","تمرین‌های تکمیلی.", W6],
      ["هفتهٔ ۷ — ست تمرینی","مرور و تمرین jQuery/انیمیشن.", W7],
      ["هفتهٔ ۸ — فرمت‌های داده (CSV/JSON/XML)","خواندن/نمایش دادهٔ ساختاریافته.", W8],
      ["هفتهٔ ۹ — دموهای کوچک","تمرین‌های رویداد/DOM.", W9],
      ["مینی‌پروژه‌ها","Atom, Chronometer, Email, Charts, Utilities, XML…", MINIP],
      ["ماشین‌حساب‌ها","چند سبک UI و تم.", CALC],
      ["تمرین‌های PHP (phptirotir)","تمرین‌های ترتیبی.", PHP],
      ["قالب‌ها / سایت‌های کامل","نمونه‌های آماده برای مطالعه.", TEMPL],
      ["آزمون وب","تسک‌ها و مینی‌پروژه‌های JS.", EXAM],
    ];

    // ---------------- Render ----------------
    const root = document.getElementById('root');
    let doneSoFar = 0;

    catalog.forEach(([name, desc, files], idx)=>{
      root.appendChild(section(name, desc, files, idx<3)); // چند بخش اول باز باشد
    });

    // ---------------- Controls ----------------
    const newTab = document.getElementById('newTab');
    const darkBtn = document.getElementById('darkBtn');
    const rtlBtn  = document.getElementById('rtlBtn');
    const expandBtn = document.getElementById('expandBtn');
    const collapseBtn = document.getElementById('collapseBtn');
    const resetBtn = document.getElementById('resetBtn');

    // remember prefs
    const prefs = {
      newTab: JSON.parse(localStorage.getItem('ww:newTab') || 'true'),
      dark: JSON.parse(localStorage.getItem('ww:dark') || 'false'),
      rtl: JSON.parse(localStorage.getItem('ww:rtl') || 'true') // پیش‌فرض راست‌به‌چپ
    };
    newTab.checked = prefs.newTab;
    if (prefs.dark) document.documentElement.classList.add('dark');
    document.body.classList.toggle('rtl', prefs.rtl);

    // apply targets
    function applyTargets(){
      document.querySelectorAll('tbody a').forEach(a=>{
        if (newTab.checked) { a.target = '_blank'; a.rel = 'noopener'; }
        else { a.removeAttribute('target'); a.removeAttribute('rel'); }
      });
    }
    applyTargets();

    newTab.onchange = ()=>{ localStorage.setItem('ww:newTab', JSON.stringify(newTab.checked)); applyTargets(); };
    darkBtn.onclick = ()=>{ document.documentElement.classList.toggle('dark'); localStorage.setItem('ww:dark', JSON.stringify(document.documentElement.classList.contains('dark'))); };
    rtlBtn.onclick  = ()=>{ document.body.classList.toggle('rtl'); localStorage.setItem('ww:rtl', JSON.stringify(document.body.classList.contains('rtl'))); };
    expandBtn.onclick = ()=> document.querySelectorAll('details').forEach(d=> d.open = true);
    collapseBtn.onclick = ()=> document.querySelectorAll('details').forEach(d=> d.open = false);

    resetBtn.onclick = ()=>{
      if(!confirm('همهٔ وضعیت‌های «انجام شد» حذف شود؟')) return;
      Object.keys(localStorage).forEach(k=>{ if(k.startsWith('ww:done:')) localStorage.removeItem(k); });
      location.reload();
    };
  </script>
</body>
</html>
